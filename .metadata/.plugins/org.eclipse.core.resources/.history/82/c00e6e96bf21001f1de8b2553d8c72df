package com.curso.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.client.RestTemplate;

import com.curso.dao.ReservaDao;
import com.curso.model.Reserva;

@Service
public class ReservaServiceImpl implements ReservaService{

	@Autowired
	ReservaDao dao;
	
	@Autowired
	RestTemplate template;

	private String url = "http://localhost:8000/vuelos";

	@Override
	public void registrarReserva(@RequestBody Reserva reserva, int numPersonas) {
		dao.save(reserva);
		
		String urlActualizarPlazasDisponibles = url + "?x=" + reserva.getIdVuelo() + "&y=" + numPersonas;
		
		template.put(urlActualizarPlazasDisponibles, urlActualizarPlazasDisponibles);
		
		
	}
	
	
	
	/*@Override
	public void altaPedido(@RequestBody Pedido pedido) {
		dao.save(pedido);

		int unidadesCompradas = pedido.getUnidadesProducto();
		int idProducto = pedido.getIdProducto();

		String urlActualizarStock = url + "?x=" + idProducto + "&y=" + unidadesCompradas;
		
		template.put(urlActualizarStock, pedido);

	}*/
	
}
